$(window).on('load', function () {
    setTimeout(function() {
        $('body').addClass('loaded');
    }, 500);
});
$(function(){
    $('.hamburger').click(function(){
        $(this).toggleClass('active');
        $('.nav_item').toggleClass('active');
    });
    $('.nav_item a').click(function() {
        $('.hamburger').removeClass('active');
        $('.nav_item').removeClass('active');
    });

    // redirect thanks
    $('#startDownload').click(function(){
        $('body').removeClass('loaded');
        setTimeout('location.replace("/thanks")', 1400);
    });
    var thanksArray = [
        'РЎРїР°СЃРёР±Рѕ, С‡С‚Рѕ РЅР°С‡РёРЅР°РµС‚Рµ РёРіСЂСѓ РІРјРµСЃС‚Рµ СЃ РЅР°РјРё!<br>Р–РґРµРј Р’Р°СЃ РЅР° РЅР°С€РёС… СЃРµСЂРІРµСЂР°С….',
        'Р Р°РґС‹ РїСЂРёРІРµС‚СЃС‚РІРѕРІР°С‚СЊ Р’Р°СЃ РЅР° РЅР°С€РµРј РїСЂРѕРµРєС‚Рµ! РЎРєР°С‡РёРІР°РЅРёРµ GTA San Andreas Рё Multiplayer РЅР°С‡РЅРµС‚СЃСЏ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё. Р”Р°Р»СЊРЅРµР№С€РёРµ РёРЅСЃС‚СЂСѓРєС†РёРё РЅР° РїСЂРµРґС‹РґСѓС‰РµР№ СЃС‚СЂР°РЅРёС†Рµ',
        'РЈСЂР°! РўРµРїРµСЂСЊ РўС‹ СЃ РЅР°РјРё! РЎРєР°С‡РёРІР°РЅРёРµ GTA Рё РєР»РёРµРЅС‚Р° СѓР¶Рµ РЅР°С‡Р°Р»РѕСЃСЊ, РјРѕР¶РµС€СЊ РїРѕРєР° РїРѕСЃРјРѕС‚СЂРµС‚СЊ РґР°Р»СЊРЅРµР№С€РёРµ РёРЅСЃС‚СЂСѓРєС†РёРё РёР»Рё РІРёРґРµРѕ Рѕ РЅР°СЃ РЅР° РїСЂРµРґС‹РґСѓС‰РµР№ СЃС‚СЂР°РЅРёС†Рµ!',
    ];
    var thanksText = thanksArray[Math.floor( Math.random() * thanksArray.length )];
    $('p.thanks_item-desc').html( thanksText );

    // slider swiper
    var swiper = new Swiper('.swiper-header', {
        slidesPerView: 1,
        slidesPerColumn: 1,
        spaceBetween: 30,
        loop: false,
        loopFillGroupWithBlank: false,
        speed: 750,
        autoplay: {
            delay: 7000,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
            dynamicBullets: true,
            renderBullet: function(index, className) {
                return '<span class="' + className + ' swiper-pagination-bullet--svg-animation"><svg width="20" height="20" viewBox="0 0 28 28"><circle class="svg__circle" cx="14" cy="14" r="12" fill="none" stroke-width="3"></circle><circle class="svg__circle-inner" cx="14" cy="14" r="12" stroke-width="3"></circle></svg></span>';
            },
        },
    });
    $('.dev').click(function(){
        $(this).toggleClass('active')
        $('.popup-dev').toggleClass('active');
        $('.overlay').toggleClass('overlay-active');
    });
    $("a.scrollto").click(function() {
        var elementClick = $(this).attr("href")
        var destination = $(elementClick).offset().top - 65  + 'px';
        jQuery("html:not(:animated),body:not(:animated)").animate({
            scrollTop: destination
        }, 800);
        return false;
    });

    // news gallery
    $('.news_item-type__wallpaper').slick({
        dots: false,
        arrows: true,
        infinite: true,
        speed: 500,
        fade: true,
        cssEase: 'linear',
        prevArrow: '<div class="arrow left"><i></i></div>',
        nextArrow: '<div class="arrow right"><i></i></div>'
    });
    var $btn = $('.more');
    $btn.on('click', function() {
        $(this).addClass('load');
        setTimeout(function() {
            $('.more').removeClass('load');
        }, 2000);
    });
});
// ip
function ie8SafePreventEvent(e) {
    if (e.preventDefault) {
        e.preventDefault()
    } else {
        e.stop()
    };

    e.returnValue = false;
    e.stopPropagation();
}
let notification = {
    notificationContainer: null,
    hideNotification: function () {
        let _ = this;
        $(_.notificationContainer).removeClass('show').addClass('hide');

        setTimeout(function () {
            _.notificationContainer.remove();
        }, 300);
    },
    showNotification: function () {
        let _ = this;
        setTimeout(function () {
            $(_.notificationContainer).removeClass('hide').addClass('show');
        }, 100);

        setTimeout(function () {
            _.hideNotification();
        }, 2000);
    },
    buildNotification: function (message) {
        let _ = this;
        _.notificationContainer = $('<div />').addClass('notification-container hide');
        let notificationMessageTemplate = `<span>${message}</span>`;
        let notificationItem = $('<div />').addClass('notification-item').html(notificationMessageTemplate);

        $(_.notificationContainer).appendTo($('body'));
        $(notificationItem).appendTo(_.notificationContainer);
    },
    success: function (message) {
        let _ = this;
        _.buildNotification(message);
        _.showNotification();
    }
};
let monitoring = {
    loadedData: null,
    copyToClipboard: function (serverIP) {
        let copyCommandSupported = document.queryCommandSupported('copy');

        if (copyCommandSupported === true) {
            let textareaTemplate = $('<textarea />').addClass('clipboard-container');
            $(textareaTemplate).val(serverIP).appendTo($('body'));
            $(textareaTemplate).select();
            try {
                let successful = document.execCommand('copy');
                let msg = successful ? 'IP СѓСЃРїРµС€РЅРѕ СЃРєРѕРїРёСЂРѕРІР°РЅ!' : 'IP РЅРµ СЃРєРѕРїРёСЂРѕРІР°РЅ!';
                notification.success(msg);
            } catch (err) {
                console.log('РќРµРІРѕР·РјРѕР¶РЅРѕ СЃРєРѕРїРёСЂРѕРІР°С‚СЊ!');
            }
            $(textareaTemplate).remove();
        }
    },
    copyToClipboard2: function (promocodes) {
        let copyCommandSupported = document.queryCommandSupported('copy');

        if (copyCommandSupported === true) {
            let textareaTemplate = $('<textarea />').addClass('clipboard-container');
            $(textareaTemplate).val(promocodes).appendTo($('body'));
            $(textareaTemplate).select();
            try {
                let successful = document.execCommand('copy');
                let msg = successful ? 'РџСЂРѕРјРѕРєРѕРґ СѓСЃРїРµС€РЅРѕ СЃРєРѕРїРёСЂРѕРІР°РЅ!' : 'РџСЂРѕРјРѕРєРѕРґ РЅРµ СЃРєРѕРїРёСЂРѕРІР°РЅ!';
                notification.success(msg);
            } catch (err) {
                console.log('РќРµРІРѕР·РјРѕР¶РЅРѕ СЃРєРѕРїРёСЂРѕРІР°С‚СЊ!');
            }
            $(textareaTemplate).remove();
        }
    },
    initListeners: function (e) {
        let _ = this;
        $('.server_item-type__ip').on('click', function(e) {
            e = $.event.fix(e);
            e.preventDefault();
            let serverIP = $(this).data('server-ip');
            _.copyToClipboard(serverIP);
        });
        $('.promocode_item-type .copy, .thanks_item-promocode__type .copy').on('click', function(e) {
            e = $.event.fix(e);
            e.preventDefault();
            let promocodes = $(this).data('promocode');
            _.copyToClipboard2(promocodes);
        });
    },

    init: function () {
        let _ = this;
        _.initListeners();
    }
};

monitoring.init();

var swiper = new Swiper('.swiper-about', {
    slidesPerView: 1,
    slidesPerColumn: 1,
    spaceBetween: 30,
    loopFillGroupWithBlank: false,
    loop: false,
    speed: 750,
    autoplay: {
        delay: 7000,
        disableOnInteraction: false,
    },
    pagination: {
        el: '.swiper-about_pagination',
        clickable: true,
        renderBullet: function (index, className) {
            return '<span class="' + className + '"></span>';
        },
    },
});